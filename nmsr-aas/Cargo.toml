[package]
name = "nmsr-aas"
version = "0.2.0"
edition = "2021"
build = "build.rs"

authors.workspace = true
homepage.workspace = true

[dependencies]
# NMSR Rendering - Library for rendering using a wgpu backed rendering engine
nmsr-rendering = { path = "../nmsr-3d-renderer/nmsr-rendering" }

ears-rs = { workspace = true }

anyhow = { workspace = true }
axum = { version = "0.6", features = ["macros"] }

# async-trait - Async trait support because Rust is bad at async
async-trait = { workspace = true }

# Twelf - Configuration library
twelf = { version = "0.12", default-features = false, features = [
    "env",
    "toml",
    "default_trait",
] }

# Serde - Serialization and Deserialization framework
serde = { workspace = true }
serde_json = { workspace = true }

base64 = "0.21"

# Hyper - HTTP client
hyper = { version = "0.14", features = ["client", "runtime"] }
hyper-tls = "0.5"
url = "2.4"

# Tokio - Async runtime
tokio = { workspace = true, features = ["full"] }

# Tracing - Logging framework
tracing = { workspace = true }

# Tracing subscriber - Composing Tracing subscribers
tracing-subscriber = { version = "0.3", features = ["env-filter", "json"] }

# OpenTelemetry - Tracing framework
opentelemetry = { version = "0.20", features = ["rt-tokio"] }
opentelemetry-otlp = { version = "0.13", default-features = true }

# Tracing OpenTelemetry - Tracing subscriber for OpenTelemetry
tracing-opentelemetry = "0.21"

# Strum - Enum helper library
strum = { workspace = true }
enumset = { version = "1.1", features = ["serde", "alloc", "std"] }

# Uuid - Uuid library
uuid = { workspace = true }

# ThisError - Error library
thiserror = { workspace = true }

# Derive More - More derive macros because Rust's standard library doesn't have enough
derive_more = { workspace = true }

# Tower - Service framework
tower = { version = "0.4", features = ["limit", "retry", "load-shed"] }
tower-http = { version = "0.4", features = ["full"] }

# symlink - Symbolic link library (because Rust's standard library doesn't handle that properly for us)
symlink = "0.1"
humantime-serde = "1.1"
serde_with = "3.3"
deadpool = "0.9"
image = { workspace = true, default-features = false }
mtpng = "0.3"

chrono = "0.4"
tokio-stream = { version = "0.1", features = ["fs"] }
sync_wrapper = "0.1"
axum-extra = { version = "0.8", features = ["multipart"] }

regex = "1.9"
indoc = "2"

xxhash-rust = { workspace = true }

is_empty = "0.2"

[features]
default = []
ears = ["nmsr-rendering/ears"]

[build-dependencies]
vergen = { version = "8.2.4", default-features = false, features = [
    "git",
    "gitcl",
] }
